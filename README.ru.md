# dialog-yml

[English](README.md) | [–†—É—Å—Å–∫–∏–π](README.ru.md)

[![Python 3.13](https://img.shields.io/badge/Python-3.13-3776AB?logo=python)](https://www.python.org/downloads/) [![aiogram-dialog 2.4.0](https://img.shields.io/badge/aiogram--dialog-2.4.0-28A745?logo=pypi)](https://pypi.org/project/aiogram-dialog/) [![MIT License](https://img.shields.io/badge/License-MIT-F7DF1E?logo=opensourceinitiative)](https://opensource.org/licenses/MIT) [![Coverage Status](https://img.shields.io/badge/Coverage-91%25-4C1?logo=codecov)](https://pypi.org/project/dialog-yml/)

---

> ‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï**: –≠—Ç–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —è–≤–ª—è–µ—Ç—Å—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π. –ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ª—é–±—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è Python, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è —Å–æ–±–æ–π –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–ª–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ YAML –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–≤ –≤ [aiogram-dialog](https://github.com/tishka17/aiogram_dialog). `dialog-yml` —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –∫–∞–∫ –æ–±–µ—Ä—Ç–∫–∞, –ø–æ–∑–≤–æ–ª—è—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –æ–ø–∏—Å—ã–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –¥–∏–∞–ª–æ–≥–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –æ–∫–Ω–∞ –∏ –≤–∏–¥–∂–µ—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ YAML. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –æ–¥–Ω–∞–∫–æ –Ω–µ –æ—Ç–º–µ–Ω—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–Ω–∏–º–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã `aiogram-dialog`.

## üìñ –û–±–∑–æ—Ä

–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ ‚Äî –∫–ª–∞—Å—Å `DialogYAMLBuilder`. –û–Ω —Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ YAML-—Ñ–∞–π–ª–æ–≤ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –µ—ë –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –¥–∏–∞–ª–æ–≥–æ–≤ `aiogram-dialog`. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —É—Å–∫–æ—Ä—è–µ—Ç –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–æ—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã–º–∏ –¥–∏–∞–ª–æ–≥–æ–≤—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏, –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∫—Ä–∞—â–∞—è –æ–±—ä–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –∫–æ–¥–∞ –Ω–∞ Python.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–≤**: –û–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ –¥–∏–∞–ª–æ–≥–∏, –æ–∫–Ω–∞ –∏ –≤–∏–¥–∂–µ—Ç—ã —Å –ø–æ–º–æ—â—å—é YAML-—Ñ–∞–π–ª–æ–≤.
- **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö YAML-—Ñ–∞–π–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é –¥–∏—Ä–µ–∫—Ç–∏–≤—ã `!include`.
- **–Ø–∫–æ—Ä—è YAML**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∫–æ—Ä–µ–π (`&`) –∏ —Å—Å—ã–ª–æ–∫ (`*`) –≤ YAML –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞.
- **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∏–¥–∂–µ—Ç–æ–≤ `aiogram-dialog`, –≤–∫–ª—é—á–∞—è:
  - –¢–µ–∫—Å—Ç–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
  - –í–∏–¥–∂–µ—Ç—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
  - –í–∏–¥–∂–µ—Ç—ã –∫–∞–ª–µ–Ω–¥–∞—Ä—è
  - –í–∏–¥–∂–µ—Ç—ã –≤—ã–±–æ—Ä–∞
  - –í–∏–¥–∂–µ—Ç—ã –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
  - –í–∏–¥–∂–µ—Ç—ã-—Å—á–µ—Ç—á–∏–∫–∏
  - –ú–µ–¥–∏–∞-–≤–∏–¥–∂–µ—Ç—ã
  - –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ...
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏**: –†–∞—Å—à–∏—Ä—è–µ–º—ã–π —Ä–µ–µ—Å—Ç—Ä —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–æ–¥–µ–ª–∏**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –≤–∏–¥–∂–µ—Ç–æ–≤.
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ FSM –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ YAML.
- **–ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –≥—Ä—É–ø–ø —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –º–æ–¥–µ–ª–µ–π.

## ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã—Ö YAML-—Ñ–∞–π–ª–æ–≤ –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã `aiogram-dialog`. –ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

<details>
<summary><b>–î–∏–∞–≥—Ä–∞–º–º–∞ 1: –û–±—â–∞—è —Å—Ö–µ–º–∞ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö</b></summary>

–≠—Ç–∞ –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Ç—å –æ—Ç YAML-—Ñ–∞–π–ª–∞ –¥–æ –≥–æ—Ç–æ–≤–æ–≥–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ä–æ—É—Ç–µ—Ä–∞ `aiogram`.

```mermaid
graph TD
    A["–°—Ç–∞—Ä—Ç: DialogYAMLBuilder.build()"] --> B{"1. –ß—Ç–µ–Ω–∏–µ –∏ –ø–∞—Ä—Å–∏–Ω–≥ YAML"};
    B -- –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ --> C{"2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π FSM"};
    B -- –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ --> D{"3. –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π Pydantic"};
    D -- –ò–º–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π --> E{"4. –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π"};
    C & E --> F{"5. –°–±–æ—Ä–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ aiogram-dialog"};
    F --> G{"6. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–æ–≤ –≤ —Ä–æ—É—Ç–µ—Ä–µ"};
    G --> H["–ö–æ–Ω–µ—Ü: –í–æ–∑–≤—Ä–∞—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞"];
```

</details>

<details>
<summary><b>–î–∏–∞–≥—Ä–∞–º–º–∞ 2: –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</b></summary>

–≠—Ç–∞ –¥–∏–∞–≥—Ä–∞–º–º–∞ –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–µ—Ç, –∫–∞–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `dialog-yml`.

```mermaid
graph LR
    subgraph `–í–∞—à –∫–æ–¥ –Ω–∞ Python`
        direction TB
        App(–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
        Funcs(–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏)
    end

    subgraph `–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ dialog-yml`
        direction TB
        Builder(DialogYAMLBuilder)
        Reader(YAMLReader)
        States(YAMLStatesManager)
        Factory(YAMLModelFactory)
        FuncReg(FuncsRegistry)
    end

    subgraph `–î–∞–Ω–Ω—ã–µ –∏ –æ–±—ä–µ–∫—Ç—ã`
        direction TB
        YAML(YAML-—Ñ–∞–π–ª—ã)
        PydanticMs(–ú–æ–¥–µ–ª–∏ Pydantic)
        AD["–û–±—ä–µ–∫—Ç—ã aiogram-dialog"]
    end

    App -- "–≤—ã–∑—ã–≤–∞–µ—Ç" --> Builder
    Funcs -- "—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤" --> FuncReg

    Builder -- "–∏—Å–ø–æ–ª—å–∑—É–µ—Ç" --> Reader
    Builder -- "–∏—Å–ø–æ–ª—å–∑—É–µ—Ç" --> States
    Builder -- "–∏—Å–ø–æ–ª—å–∑—É–µ—Ç" --> Factory

    Reader -- "—á–∏—Ç–∞–µ—Ç" --> YAML
    
    Factory -- "—Å–æ–∑–¥–∞–µ—Ç" --> PydanticMs
    PydanticMs -- "—Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞" --> FuncReg

    Builder -- "–ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç" --> PydanticMs
    Builder -- "—Å–æ–∑–¥–∞–µ—Ç" --> AD
```

</details>

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ pip:

```bash
pip install dialog-yml
```

–ò–ª–∏, –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ uv (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
uv pip install dialog-yml
```

## üß∞ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python >= 3.13
- aiogram >= 3.24.0
- aiogram-dialog >= 2.4.0
- pydantic >= 2.12.5
- PyYAML >= 6.0.3
- pyyaml-include >= 2.2

## üë§ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

### ‚öôÔ∏è –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–í–æ—Ç –±–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

```python
from aiogram import Router
from dialog_yml import DialogYAMLBuilder

# –°–æ–±–∏—Ä–∞–µ–º –¥–∏–∞–ª–æ–≥ –∏–∑ YAML-—Ñ–∞–π–ª–∞
dy_builder = DialogYAMLBuilder.build(
    yaml_file_name="main.yaml",
    yaml_dir_path="path/to/yaml/files",
    router=Router(),
)

# –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º—É —Ä–æ—É—Ç–µ—Ä—É
router = dy_builder.router
```

### üìÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ YAML

–ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ YAML-—Ñ–∞–π–ª–∞ –¥–ª—è –¥–∏–∞–ª–æ–≥–∞:

```yaml
---
dialogs:
  DialogGroupName:  # –≠—Ç–æ —Å—Ç–∞–Ω–µ—Ç –∏–º–µ–Ω–µ–º StatesGroup
    launch_mode: ROOT  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –∑–∞–ø—É—Å–∫–∞
    windows:
      STATE_NAME:  # –≠—Ç–æ —Å—Ç–∞–Ω–µ—Ç –∏–º–µ–Ω–µ–º State
        widgets:
          - text: "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!"
          - button:
              text: "–ù–∞–∂–º–∏ –º–µ–Ω—è"
              id: click_btn
              on_click: my_function
...
```

### ‚öôÔ∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–π

–•–æ—Ç—è YAML –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã UI, –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ Python. `dialog-yml` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤—è–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ Python —Å –≤–∞—à–∏–º–∏ –≤–∏–¥–∂–µ—Ç–∞–º–∏ –¥–ª—è –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ü–µ–ª–µ–π: **–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π** –∏ **–≥–µ—Ç—Ç–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö**.

–°–Ω–∞—á–∞–ª–∞ –≤–∞–º –Ω—É–∂–Ω–æ –º–µ—Å—Ç–æ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤–∞—à–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π.

```python
# funcs.py
from dialog_yml import FuncsRegistry

# –°–æ–∑–¥–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä
funcs_registry = FuncsRegistry()

# –¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–ª—è–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —ç—Ç–æ—Ç —Ä–µ–µ—Å—Ç—Ä (—Å–º. –ø—Ä–∏–º–µ—Ä—ã –Ω–∏–∂–µ)
```

`dialog-yml` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å–∏–Ω–≥–ª—Ç–æ–Ω –¥–ª—è —Ä–µ–µ—Å—Ç—Ä–∞. –í–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ–≥–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–±–æ—Ä–∫–∏. –°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ ‚Äî **—É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–æ–¥—É–ª—å Python, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç–µ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ —Å–≤–æ–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω** –¥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞.

```python
# main.py - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
from aiogram import Router
from dialog_yml import DialogYAMLBuilder

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª—å, –≥–¥–µ –≤—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ `funcs_registry` –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏.
# –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä.
import my_project.dialogs.funcs 

# ... –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ ...

# –¢–µ–ø–µ—Ä—å —Å–æ–±–∏—Ä–∞–µ–º –¥–∏–∞–ª–æ–≥–∏. –°–±–æ—Ä—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.
dy_builder = DialogYAMLBuilder.build(
    yaml_file_name="main.yaml",
    yaml_dir_path="path/to/yaml/files",
    router=router,
)
```

#### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ç–∞–∫–∏–µ –∫–∞–∫ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –∏–ª–∏ –≤—ã–±–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞. –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∏—Ö –Ω–∞ –ø–æ–ª—è `on_click`, `on_selected`, `on_process_result` –∏ —Ç.–¥.

–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å: **—Å–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–æ–º—É, —á—Ç–æ –æ–∂–∏–¥–∞–µ—Ç `aiogram-dialog`** –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞. `dialog-yaml` –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é –¥–∞–ª—å—à–µ.

**–ö–æ–¥ –Ω–∞ Python:**

```python
# funcs.py
from aiogram.types import CallbackQuery
from aiogram_dialog import DialogManager
from aiogram_dialog.widgets.kbd import Button

# –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –¥–ª—è —Å–æ–±—ã—Ç–∏—è on_click –∫–Ω–æ–ø–∫–∏
async def on_button_click(
    callback: CallbackQuery,
    widget: Button,
    manager: DialogManager,
):
    print(f"–ö–Ω–æ–ø–∫–∞ '{widget.widget_id}' –±—ã–ª–∞ –Ω–∞–∂–∞—Ç–∞!")
    await manager.next()

funcs_registry.register(on_button_click)
```

**YAML-—Ñ–∞–π–ª:**

```yaml
# ...
- button:
    text: "–ù–∞–∂–º–∏ –º–µ–Ω—è"
    id: click_btn
    on_click: on_button_click # –ò–º—è —Ñ—É–Ω–∫—Ü–∏–∏
```

> üí° **–°–æ–≤–µ—Ç**: –ß—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å–∏–≥–Ω–∞—Ç—É—Ä—É –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ aiogram-dialog](https://aiogram-dialog.readthedocs.io/en/latest/).

#### –ì–µ—Ç—Ç–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö

–ì–µ—Ç—Ç–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∞—à–∏—Ö –≤–∏–¥–∂–µ—Ç–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–∫—Å—Ç –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞ `Format` –∏–ª–∏ —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞ `Select`. –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∏—Ö –Ω–∞ –ø–æ–ª—è `text`, `items`, `when` –∏ —Ç.–¥.

–≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—ã—á–Ω–æ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ `(DialogManager, **kwargs)` –∏ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –æ–∂–∏–¥–∞–µ–º–æ–º –≤–∏–¥–∂–µ—Ç–æ–º.

**–ö–æ–¥ –Ω–∞ Python:**

```python
# funcs.py
from aiogram_dialog import DialogManager

async def get_user_name(manager: DialogManager, **kwargs):
    # –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ dialog_manager
    return {"user_name": manager.event.from_user.full_name}

async def get_products_for_select(**kwargs):
    return [
        ("–Ø–±–ª–æ–∫–∏", "fruit_apple"),
        ("–ê–ø–µ–ª—å—Å–∏–Ω—ã", "fruit_orange"),
        ("–°—Ç–µ–π–∫", "meat_steak"),
    ]

funcs_registry.register(get_user_name)
funcs_registry.register(get_products_for_select)
```

**YAML-—Ñ–∞–π–ª:**

```yaml
# ...
- text:
    text: "–ü—Ä–∏–≤–µ—Ç, {user_name}!"
    data: get_user_name # –≠—Ç–æ—Ç –≥–µ—Ç—Ç–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
# ...
- select:
    id: products
    items: get_products_for_select # –≠—Ç–æ—Ç –≥–µ—Ç—Ç–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    item_id_getter: 1 # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç –∫–æ—Ä—Ç–µ–∂–∞ –∫–∞–∫ item_id
    on_selected: on_product_selected
```

#### –ü–µ—Ä–µ–¥–∞—á–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ YAML

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤–∞—à–µ–≥–æ YAML-—Ñ–∞–π–ª–∞ –Ω–∞–ø—Ä—è–º—É—é –≤ –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é Python. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

–î–ª—è —ç—Ç–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é –∫–∞–∫ –æ–±—ä–µ–∫—Ç –≤ YAML, –≥–¥–µ `name` ‚Äî —ç—Ç–æ –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏, –∞ –¥—Ä—É–≥–∏–µ –∫–ª—é—á–∏ ‚Äî –≤–∞—à–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ.

**–ö–æ–¥ –Ω–∞ Python:**

```python
# funcs.py
from aiogram.types import CallbackQuery
from aiogram_dialog import DialogManager
from aiogram_dialog.widgets.kbd import Button

# –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `data`
async def on_navigate(
    callback: CallbackQuery,
    widget: Button,
    manager: DialogManager,
    data: dict,
):
    target_state = data.get("target_state")
    if target_state:
        # –ó–¥–µ—Å—å –≤–∞–º –Ω—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –æ–±—ä–µ–∫—Ç State
        # (–≠—Ç–æ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä)
        await manager.start(target_state)

funcs_registry.register(on_navigate)
```

**YAML-—Ñ–∞–π–ª:**

```yaml
# ...
- button:
    text: "–ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ—Ñ–∏–ª—å"
    id: go_profile
    on_click:
      name: on_navigate
      target_state: "UserProfile:main" # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –≤ —Ñ—É–Ω–∫—Ü–∏—é
- button:
    text: "–ü–µ—Ä–µ–π—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
    id: go_settings
    on_click:
      name: on_navigate
      target_state: "Settings:main" # –¢–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è, –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ
```

### üìå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —è–∫–æ—Ä–µ–π YAML

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –≤ YAML-—Ñ–∞–π–ª–∞—Ö, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —è–∫–æ—Ä—è:

```yaml
---
anchors:
  back_button: &back
    id: back
    text: "–ù–∞–∑–∞–¥"
    state: Menu:MAIN
  multi_select: &multi_select_config
    checked: {val: "‚úì {item[0]}", formatted: true}
    unchecked: {val: "{item[0]}", formatted: true}
    id: ms
    items: products
    item_id_getter: 1

windows:
  MAIN:
    widgets:
      - text: "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
      - button:
          text: "–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
          id: settings
          state: Settings:MAIN
  SETTINGS:
    widgets:
      - text: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
      - multi_select: *multi_select_config
      - switch_to: *back
...
```

### üìÅ –í–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö YAML-—Ñ–∞–π–ª–æ–≤

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö YAML-—Ñ–∞–π–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é –¥–∏—Ä–µ–∫—Ç–∏–≤—ã `!include`:

**main.yaml:**

```yaml
---
dialogs:
  Menu: !include menu.yaml
  Settings: !include settings.yaml
...
```

**menu.yaml:**

```yaml
---
launch_mode: ROOT
windows:
  MAIN:
    widgets:
      - text: "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
      - start:
          text: "–ü–µ—Ä–µ–π—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
          id: settings_btn
          state: Settings:MAIN
...
```

## üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)

### üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é uv:

```bash
uv sync
```

–ò–ª–∏ —Å –ø–æ–º–æ—â—å—é pip:

```bash
pip install -e .
pip install -r requirements.txt
```

### üß± –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –≤ —Ñ–∞–π–ª–µ [requirements.txt](requirements.txt) –∏ –≤ —Å–µ–∫—Ü–∏–∏ `[project.dependencies]` —Ñ–∞–π–ª–∞ `pyproject.toml`.

### üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

üêç **uv** - –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
üßº **Ruff** - —Ñ–æ—Ä–º–∞—Ç–µ—Ä –∏ –ª–∏–Ω—Ç–µ—Ä –∫–æ–¥–∞
üß™ **pytest** - –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
üì¶ **setuptools** - –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø–∞–∫–µ—Ç–∞

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–º–µ–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

- `src/core.py`: –°–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å `DialogYAMLBuilder`
- `src/reader.py`: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —á—Ç–µ–Ω–∏–µ YAML-—Ñ–∞–π–ª–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π `!include`
- `src/models/`: –°–æ–¥–µ—Ä–∂–∏—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–∏–∞–ª–æ–≥–∞
  - `base.py`: –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –º–æ–¥–µ–ª–µ–π
  - `dialog.py`: –ú–æ–¥–µ–ª—å –¥–∏–∞–ª–æ–≥–∞
  - `window.py`: –ú–æ–¥–µ–ª—å –æ–∫–Ω–∞
  - `widgets/`: –†–∞–∑–ª–∏—á–Ω—ã–µ –º–æ–¥–µ–ª–∏ –≤–∏–¥–∂–µ—Ç–æ–≤
  - `funcs/`: –ú–æ–¥–µ–ª–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏
- `src/middleware.py`: Middleware –¥–ª—è `dialog-yaml`
- `src/states.py`: –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

## üìö –ü—Ä–∏–º–µ—Ä—ã

–°–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π [dialog-yml-examples](https://github.com/smkthat/dialog-yml-examples) –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:

- –ù–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø –¥–∏–∞–ª–æ–≥–æ–≤
- –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –≤–∏–¥–∂–µ—Ç–æ–≤
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- –í–∫–ª—é—á–µ–Ω–∏–µ YAML-—Ñ–∞–π–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —è–∫–æ—Ä–µ–π

–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–º–µ—Ä:

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å —Ç–æ–∫–µ–Ω–æ–º –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –∏ —É—Ä–æ–≤–Ω–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

    ```
    MEGA_BOT_TOKEN=your_telegram_bot_token
    MEGA_BOT_LOG_LEVEL=INFO
    ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–º–µ—Ä:

    ```bash
    # –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ uv (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
    PYTHONPATH=. uv run dialog-yml-examples/mega/bot.py
    
    # –ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ python –Ω–∞–ø—Ä—è–º—É—é
    PYTHONPATH=. python dialog-yml-examples/mega/bot.py
    ```

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: `PYTHONPATH=.` –Ω–µ–æ–±—Ö–æ–¥–∏–º, —á—Ç–æ–±—ã Python –º–æ–≥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑—Ä–µ—à–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã –º–æ–¥—É–ª–µ–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–º–µ—Ä–∞.

## ‚å®Ô∏è –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Makefile –¥–ª—è –æ–±—â–∏—Ö –∑–∞–¥–∞—á:

üí° `make help` - –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
üßº `make format` - –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ —Å –ø–æ–º–æ—â—å—é Ruff
üîç `make check` - –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
üß™ `make test` - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
üìä `make test-cov` - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Å—Ç–∞–º–∏
üìà `make test-html` - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å HTML-–æ—Ç—á–µ—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Å—Ç–∞–º–∏
ü§ñ `make mega-bot` - –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–º–µ—Ä mega-–±–æ—Ç–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤:

```bash
make test
# –∏–ª–∏
python -m pytest tests/
```

## üì¶ –°–±–æ—Ä–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è

–ß—Ç–æ–±—ã —É–ø–∞–∫–æ–≤–∞—Ç—å –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

    ```bash
    pip install build twine
    # –∏–ª–∏ —Å –ø–æ–º–æ—â—å—é uv
    uv pip install build twine
    ```

2. –û–±–Ω–æ–≤–∏—Ç–µ –≤–µ—Ä—Å–∏—é –≤ `pyproject.toml` –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π.

3. –°–æ–±–µ—Ä–∏—Ç–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—ã:

    ```bash
    python -m build
    # –∏–ª–∏ —Å –ø–æ–º–æ—â—å—é uv
    uv run python -m build
    ```

4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–∞–∫–µ—Ç –Ω–∞ PyPI:

    ```bash
    python -m twine upload dist/*
    ```

–§–∞–π–ª `.python-version` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–µ—Ä—Å–∏—é Python, —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—É—é –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –û–Ω –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–±–æ—Ä–∫—É –ø–∞–∫–µ—Ç–∞, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∫–∞–∫—É—é –≤–µ—Ä—Å–∏—é Python –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —É—Å–ª–æ–≤–∏—è–º–∏, —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∞—à –≤–∫–ª–∞–¥! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å Pull Request. –î–ª—è —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ issue, —á—Ç–æ–±—ã –æ–±—Å—É–¥–∏—Ç—å, —á—Ç–æ –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –∏–∑–º–µ–Ω–∏—Ç—å.
